<!-- Barra de Ferramentas Fixa com o Bot√£o de Pesquisa -->
<div class="toolbar">
  <div class="toolbar-item">
    <button class="toolbar-button" (click)="toggleSearch()">
      üîç
    </button>
  </div>
</div>

<!-- Barra de Pesquisa -->
<div class="search-container" *ngIf="showSearchBar">
  <form [formGroup]="searchForm" class="search-form">
    <input
      formControlName="searchTerm"
      type="text"
      placeholder="Pesquisar por nome, descri√ß√£o, pre√ßo..."
      class="search-input"
    />
  </form>
</div>

<!-- Lista de Produtos -->
<div *ngIf="filteredProducts.length > 0; else noProducts">
  <h2>Lista de Produtos</h2>

  <!-- Sele√ß√£o de Itens por P√°gina -->
  <div class="pagination-controls">
    <label for="itemsPerPage">Itens por p√°gina:</label>
    <select id="itemsPerPage" (change)="updateItemsPerPage($event)">
      <option value="3">3</option>
      <option value="5">5</option>
      <option value="10">10</option>
    </select>
  </div>

  <ul>
    <li *ngFor="let product of paginatedProducts" class="product-item"
        (mouseenter)="product.showActions = true" (mouseleave)="product.showActions = false">
      <h3>{{ product.name }}</h3>
      <p>ID: {{ product.id }}</p>
      <p>Descri√ß√£o: {{ product.description }}</p>
      <p><strong>Pre√ßo por Unidade: </strong>R${{ product.priceforlote / product.quantity }}</p>
      <p><strong>Pre√ßo por Lote: </strong>R${{ product.priceforlote }}</p>
      <p><strong>Quantidade por Lote: </strong>{{ product.quantity }}</p>

      <!-- Bot√µes de A√ß√£o -->
      <button *ngIf="product.showActions" class="delete-button" (click)="confirmDelete(product.id)">X</button>
      <button *ngIf="product.showActions" class="edit-button" (click)="openEditDialog(product)">‚úèÔ∏è</button>
    </li>
  </ul>

  <!-- Bot√µes de Pagina√ß√£o -->
  <div class="pagination">
    <button
      *ngFor="let page of [].constructor(totalPages()); let i = index"
      [class.active]="i + 1 === currentPage"
      (click)="changePage(i + 1)">
      {{ i + 1 }}
    </button>
  </div>
</div>

<!-- Caso n√£o haja produtos -->
<ng-template #noProducts>
  <p>Nenhum produto dispon√≠vel no momento.</p>
</ng-template>

<!-- Mensagem de erro -->
<div *ngIf="errorMessage" class="error-message">
  {{ errorMessage }}
</div>

<!-- Mensagem de carregando -->
<div *ngIf="loading" class="loading">
  Carregando produtos...
</div>
